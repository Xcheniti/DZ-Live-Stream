name: ğŸ“º Update Ennahar TV
on:
  schedule:
    - cron: '0 */3 * * *' # ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 3 Ø³Ø§Ø¹Ø§Øª
  workflow_dispatch: # Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: pip install requests

      - name: Run extractor
        run: |
          mkdir -p results # Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Exit Code 2 Ø¹Ø¨Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹
          python ennahar_extractor.py

      - name: Commit and Push
        run: |
          git config --global user.name "GitHub Action"
          git config --global user.email "action@github.com"
          git add results/*
          git commit -m "ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø± Ø¢Ù„ÙŠØ§Ù‹ [$(date)]" || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØºÙŠÙŠØ±Ø§Øª Ù„Ù„Ø±ÙØ¹"
          git push
